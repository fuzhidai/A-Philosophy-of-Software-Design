代码注释在软件设计中扮演着至关重要的角色，为开发者理解系统，高效工作提供了必不可少的帮助，但注释的作用远不止于此。注释也在抽象中扮演了重要角色，缺少注释，你就无法隐藏复杂性。最后，如果正确进行注释的编写，实际上会改善系统的设计。

不幸的是，该观点并未被广泛传播，很多生产环境的代码几乎没有注释。许多开发者认为，编写注释是浪费时间，其它一些开发者虽看到了注释的价值，但不知为何，却从未抽出时间来编写它们。幸运的是，许多开发团队已经认识到了注释的价值，并且看起来这样的团队正变得越来越多。可是，哪怕是在鼓励注释的团队中，注释也经常被认为是繁琐的工作，许多开发者并不理解为什么要编写它们，所以最终的注释往往非常一般。不充分的注释会对软件开发带来不必要的巨大阻力。

本章将会讨论开发者用于逃避编写注释的借口，以及为什么注释真的很重要。第十三章将会讨论如何编写好的注释，后续剩下的一些章节将会探讨相关的一些议题，比如变量名称的选择，以及如何通过文档来改善系统设计。我希望这些章节能使你信服三件事：好的注释会对软件的整体质量产生巨大影响，编写优秀的注释很困难，以及（这或许很难相信）编写注释其实很有趣。

开发者未编写注释时，通常会以下面这些理由来辩解：

* “好代码是自描述的。”
* “我没有时间来编写注释。”
* “注释会过时并产生误导。”
* “我看过的注释都是无价值的，何必呢？”

在下面的章节中，我将会设法处理以上这些借口。

### 12.1 好代码是自描述的

有些人确信，如果代码编写的足够优秀，那很明显无需注释。这是一个美好的幻想，就像冰淇淋对健康有益：我们真的愿意相信它！不幸的是，它肯定不是真的。诚然，编写注释时可以通过某些方式，来减少对注释的需要，例如选择良好的变量名称（第十四章）。尽管如此，仍然存在大部分的设计信息，无法通过代码进行展示。例如，只有类接口的一小部分（例如它方法的签名），能够在代码中正式定义。接口的非正式方面，例如高层次的描述（每个方法的行为，以及它返回值的含义），则只能在注释中描述。有很多其它的事情无法在代码中进行描述，例如特殊设计决策的原因，或调用特定方法的有效条件。

一些开发者认为，如果其他人想要知道方法做了什么，他们应该阅读方法的代码：这比任何注释都更准确。读者或许可以通过阅读代码，从抽象注释中推导方法，但这是非常耗时且痛苦的。此外，如果你预期用户会阅读代码的实现，那你就会让每个方法都尽可能的短小，这样方法就会非常易读。但如果方法执行了任何重要的任务，你将会把它打碎成许多更小的方法。这将会产生一大堆浅层方法。除此之外，它实际并没有让代码变得更易读：为了理解顶层代码的行为，读者将可能需要理解嵌套的方法。对于大型系统，让读者通过阅读代码来学习它们的行为，这非常不切实际。

此外，注释是抽象的基础。回到第四章，抽象的目的是为了隐藏复杂度：抽象是实体的简单视图，保留重要信息，省略那些可以安全忽略的细节。如果用户为了使用方法，而去阅读它的代码，抽象将不复存在：方法的所有复杂度都被暴露出来。没有注释，方法的唯一抽象就是它的声明，指定了它的名称，以及参数和结果的类型。声明缺少了太多重要信息，以至于无法单独提供有效的抽象。例如，某个提取子字符串的方法，可能具有两个参数，start 和 end，用于指定提取字符串的范围。单从声明来看，它不太可能说明提取的字符串是否包含 end 指向的字符，以及如果 start > end 时会发生什么。注释可以补充调用者所需的额外信息，从而在隐藏实现细节的情况下，提供简单的视图。更重要的是，注释通过人类语言（如英语）进行编写，这让它们虽没有代码那样准确，但却提供了更多可表达性，所以我们可以创建一个简洁易懂的描述。如果你想要使用抽象来隐藏复杂度，注释必不可少。