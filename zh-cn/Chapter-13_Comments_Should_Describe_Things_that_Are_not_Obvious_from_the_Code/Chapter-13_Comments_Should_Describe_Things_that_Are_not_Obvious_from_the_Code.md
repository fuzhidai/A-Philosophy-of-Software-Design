之所以编写注释，是因为开发者在编写代码时脑中的信息，无法通过编程语言的语句来完整地表述。注释能够记录这些信息，所以后续的开发者能够轻易地理解和修改代码。注释的指导原则是，注释应该描述那些代码中无法清晰表达的事情。

很多事情都无法从代码中清晰表述。有时可能是一些低层细节，例如，如果一对索引描述了一个范围，那索引自身所对应的元素，是否属于该范围则并不明显。有时某段代码的存在原因可能并不清晰，或为什么它由某种特殊的方式来实现。有时存在一些开发者所遵循的规则，比如 “总是在调用 b 之前调用 a”。你可能可以在查看所有代码后，猜测到规则，但这个过程痛苦且易错，注释可以让规则变得明晰。

抽象是编写注释的一大原因，注释能提供更多代码中隐含的信息，其目的是以更简单的方式来思考事物。代码过于详细，无法提取抽象信息，而注释却可以提供一种更简单，更高层次的视图，比如：“该函数被调用后，网络流量将会限制为 maxBandwidth 字节每秒”。即使某些信息能够通过阅读代码来推断得出，我们也不想强迫模块用户做这些工作，阅读代码非常耗时，并会迫使他们考虑大量与使用模块无关的信息。开发者应能在仅阅读外部可见声明的背景下，理解模块提供的抽象。而实现该目的的唯一方式，只有在定义时提供注释。

本章将探讨哪些信息需要在注释中记录，以及如何编写良好的注释。正如你所见，良好注释通常表述与代码不同层次的细节，在某些情况下更详细，而另外一些情况则更粗略（抽象）。

### 13.1 遵守规范

编写注释的第一步，需要确定注释的规范，比如注释内容和注释格式。如果编程语言具有文档编译工具，例如 Java 的 Javadoc、C++ 的 Doxygen、或 Go 的 godoc，那请遵守这些工具的规范，虽然它们都不够完美，但工具提供了足够的好处来加以弥补。如果编程语言没有可以遵守的规范，那可以尝试采用其它相似语言或相似项目的规范，这样其他开发者将会更易理解和遵守。

规范服务于两个目的。首先，确保一致性，这让注释更易阅读和理解。其次，确保你确实是在编写注释。如果对于将要注释的内容和方式没有明确想法，那最终很容易编写出毫无意义的注释。

大多数注释可以分为以下几类：

**接口：**紧邻组件（类、数据结构、方法和函数）声明前的注释块，描述组件接口。对于某类，注释描述该类提供的整体抽象。对于某方法或函数，注释描述它的整体行为、参数和返回值，还可能包括副作用、抛出异常，以及调用方在调用前必须知晓的其它信息。

**数据结构成员：**紧邻数据结构字段定义的注释，例如实例变量或类静态变量。

**实现注释：**方法或函数内部的注释，描述代码内部的工作方式。

**跨组件注释：**描述跨组件边界依赖的注释。

前面两个类型的注释最为重要。所有类和方法都应具有接口注释，每个类变量也应具有注释。有时变量或方法的声明非常清晰，以至于无需增加注释，getter 和 setter 方法有时就是这类情况，但这种情况很少见，相比于花精力担心是否需要注释，注释所有内容则容易得多。实现（Implementation）注释通常是多余的（见下面的 13.6 节）。跨组件注释最为最少见，并且最难编写，但当需要它们时，它们往往又是比较重要的，13.7 节将详细探讨它们。

### 